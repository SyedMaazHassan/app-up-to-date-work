{% extends 'base.html' %}

{% block content %}
  <div class="container my-5">
    <div class="row">
      <div class="col-12">
        <h1 class="text-start mb-5">MSG Actions Update </h1>
      </div>
    </div>
        <form method="POST" enctype="multipart/form-data" action="/update/action1/update/request/{{data[0]}}">
          <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label>Action assigned to:</label>
                    <select id="person" name="person" class="form-control">
                        {% for person in persons %}
                          {% if person == data[3] %}
                          <option value="{{ person }}" selected>{{ person }}</option>
                          {% else %}
                          <option value="{{ person }}">{{ person }}</option>
                          {% endif %}
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Action Type:</label>
                    <select id="type" name="type" class="form-control">
                        {% for type in types %}
                        {% if type == data[5] %}
                          <option value="{{ type }}" selected>{{ type }}</option>
                          {% else %}
                          <option value="{{ type }}">{{ type }}</option>
                          {% endif %}
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label>Action Facility:</label>
                    <select id="table" name="table" class="form-control" multiple>
                        {% for table in tables %}
                          {% if table in data[7] %}
                          <option value="{{ table }}" selected>{{ table }}</option>
                          {% else %}
                          <option value="{{ table }}">{{ table }}</option>
                          {% endif %}
                        {% endfor %}
                    </select>
                </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Action Title and Date:</label>
                <input type="text" class="form-control" id="title" name="title" value= "{{data[8]}}">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="form-group">
                <label>Action Description:</label>
                <input style="height:200px; width:1110px; word-break: break-word;" type="text" class="form-control" id="description" name="description" value= "{{data[6]}}">
              </div>
            </div>
          </div>
        <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label>S/C:</label>
                <select id="s_c" name="s_c" class="form-control">
                    {% for val in s_c_values %}
                      {% if val == data[1] %}
                      <option value="{{ val }}" selected>{{ val }}</option>
                      {% else %}
                      <option value="{{ val }}">{{ val }}</option>
                      {% endif %}
                    {% endfor %}
                </select>
              </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                  <label>A/R Ref:</label>
                  <input type="text" class="form-control" id="wodb_ref" name="wodb_ref" value= "{{data[9]}}">
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                  <label>SWET Ref:</label>
                  <input type="text" class="form-control" id="srdb_ref" name="srdb_ref" value= "{{data[10]}}">
                </div>
            </div>            
            <div class="col-md-3">
              <div class="form-group">
                <label>Affected files:</label>
                <input type="file" class="form-control-file" id="affected_files" name="affected_files" multiple>
              </div>
          </div>            
      </div>
          <div class="d-flex justify-content-end align-items-center">
            <button type="submit" class="btn btn-primary">Update</button>
          </div>
          </form>
  </div>
  <script>
    $(document).ready(function() {
      $('#table').select2();
    });
  </script>
{% endblock %}

